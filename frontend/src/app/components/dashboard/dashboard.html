<main class="mx-auto p-6">
  <h1 class="text-center text-4xl font-bold mb-6">Latest Jobs</h1>

  <!-- Search Filter -->
  <div class="flex justify-center mb-6">
    <input
      id="job-search"
      type="text"
      [(ngModel)]="searchTerm"
      placeholder="Search by title, company, or skill..."
      class="w-2xl border text-gray-500 bg-white rounded-4xl px-6 py-4 focus:text-gray-900 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent"
    />
  </div>

  <!-- Jobs Grid -->
  <div
    *ngIf="filteredJobs().length === 0"
    class="text-center text-gray-500 py-10 text-2xl font-semibold"
  >
    No jobs found
  </div>

  <div class="grid grid-cols-1 sm:grid-cols-3 lg:grid-cols-4 gap-6">
    <div
      *ngFor="let job of paginatedJobs()"
      class="bg-white border shadow-md rounded-2xl p-5 hover:shadow-lg transition"
    >
      <h3 class="text-lg font-bold text-gray-800">{{ job.title }}</h3>
      <p class="text-gray-500">{{ job.company }}</p>
      <p class="text-md text-gray-400">{{ job.location }}</p>

      <div class="flex flex-wrap gap-2 my-3 max-h-20 overflow-hidden">
        <span
          *ngFor="let skill of job.skills.split(', ')"
          class="bg-black text-white text-xs px-4 py-2 rounded-full"
        >
          {{ skill }}
        </span>
      </div>

      <p class="text-md text-gray-600 line-clamp-3">{{ job.description }}</p>

      <a
        [href]="job.url"
        target="_blank"
        class="mt-4 inline-block text-sm font-semibold text-black px-3 py-2 rounded-[40px] border-2 hover:bg-black hover:text-white transition duration-300 border-black"
      >
        Apply Now â†’
      </a>
      <p class="text-sm text-gray-400 mt-3">
        Posted on {{ job.datePosted | date : "mediumDate" }}
      </p>
    </div>
  </div>

  <!-- Pagination -->
  <div class="flex justify-center items-center mt-8 gap-2">
    <button
      (click)="prevPage()"
      [disabled]="currentPage === 1"
      class="px-4 py-2 font-semibold bg-black text-white cursor-pointer hover:bg-gray-800 rounded-4xl disabled:opacity-50 disabled:cursor-not-allowed"
    >
      Prev
    </button>

    <span class="px-3 py-1">{{ currentPage }} / {{ totalPages() }}</span>

    <button
      (click)="nextPage()"
      [disabled]="currentPage === totalPages()"
      class="px-4 py-2 font-semibold bg-black text-white cursor-pointer hover:bg-gray-800 rounded-4xl disabled:opacity-50 disabled:cursor-not-allowed"
    >
      Next
    </button>
  </div>
</main>
